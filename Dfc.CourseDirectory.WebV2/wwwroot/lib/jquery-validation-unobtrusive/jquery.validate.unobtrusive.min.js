/**
 * @license
 * Unobtrusive validation support library for jQuery and jQuery Validate
 * Copyright (c) .NET Foundation. All rights reserved.
 * Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.
 * @version <placeholder>
 */
!function(a){"function"==typeof define&&define.amd?define("jquery.validate.unobtrusive",["jquery-validation"],a):"object"==typeof module&&module.exports?module.exports=a(require("jquery-validation")):jQuery.validator.unobtrusive=a(jQuery)}((function(a){var e,n=a.validator,t="unobtrusiveValidation";function r(a,e,n){a.rules[e]=n,a.message&&(a.messages[e]=a.message)}function i(a){return a.replace(/([!"#$%&'()*+,./:;<=>?@\[\\\]^`{|}~])/g,"\\$1")}function o(a){return a.substr(0,a.lastIndexOf(".")+1)}function d(a,e){return 0===a.indexOf("*.")&&(a=a.replace("*.",e)),a}function s(e,n){var t=a(this).find("[data-valmsg-for='"+i(n[0].name)+"']"),r=t.attr("data-valmsg-replace"),o=r?!1!==a.parseJSON(r):null;t.removeClass("field-validation-valid").addClass("field-validation-error"),e.data("unobtrusiveContainer",t),o?(t.empty(),e.removeClass("input-validation-error").appendTo(t)):e.hide()}function l(e,n){var t=a(this).find("[data-valmsg-summary=true]"),r=t.find("ul");r&&r.length&&n.errorList.length&&(r.empty(),t.addClass("validation-summary-errors").removeClass("validation-summary-valid"),a.each(n.errorList,(function(){a("<li />").html(this.message).appendTo(r)})))}function u(e){var n=e.data("unobtrusiveContainer");if(n){var t=n.attr("data-valmsg-replace"),r=t?a.parseJSON(t):null;n.addClass("field-validation-valid").removeClass("field-validation-error"),e.removeData("unobtrusiveContainer"),r&&n.empty()}}function m(e){var n=a(this),t="__jquery_unobtrusive_validation_form_reset";if(!n.data(t)){n.data(t,!0);try{n.data("validator").resetForm()}finally{n.removeData(t)}n.find(".validation-summary-errors").addClass("validation-summary-valid").removeClass("validation-summary-errors"),n.find(".field-validation-error").addClass("field-validation-valid").removeClass("field-validation-error").removeData("unobtrusiveContainer").find(">*").removeData("unobtrusiveContainer")}}function f(e){var r=a(e),i=r.data(t),o=a.proxy(m,e),d=n.unobtrusive.options||{},f=function(n,t){var r=d[n];r&&a.isFunction(r)&&r.apply(e,t)};return i||(i={options:{errorClass:d.errorClass||"input-validation-error",errorElement:d.errorElement||"span",errorPlacement:function(){s.apply(e,arguments),f("errorPlacement",arguments)},invalidHandler:function(){l.apply(e,arguments),f("invalidHandler",arguments)},messages:{},rules:{},success:function(){u.apply(e,arguments),f("success",arguments)}},attachValidation:function(){r.off("reset."+t,o).on("reset."+t,o).validate(this.options)},validate:function(){return r.validate(),r.valid()}},r.data(t,i)),i}return n.unobtrusive={adapters:[],parseElement:function(e,n){var t,r,i,o=a(e),d=o.parents("form")[0];d&&((t=f(d)).options.rules[e.name]=r={},t.options.messages[e.name]=i={},a.each(this.adapters,(function(){var n="data-val-"+this.name,t=o.attr(n),s={};void 0!==t&&(n+="-",a.each(this.params,(function(){s[this]=o.attr(n+this)})),this.adapt({element:e,form:d,message:t,params:s,rules:r,messages:i}))})),a.extend(r,{__dummy__:!0}),n||t.attachValidation())},parse:function(e){var t=a(e),r=t.parents().addBack().filter("form").add(t.find("form")).has("[data-val=true]");t.find("[data-val=true]").each((function(){n.unobtrusive.parseElement(this,!0)})),r.each((function(){var a=f(this);a&&a.attachValidation()}))}},(e=n.unobtrusive.adapters).add=function(a,e,n){return n||(n=e,e=[]),this.push({name:a,params:e,adapt:n}),this},e.addBool=function(a,e){return this.add(a,(function(n){r(n,e||a,!0)}))},e.addMinMax=function(a,e,n,t,i,o){return this.add(a,[i||"min",o||"max"],(function(a){var i=a.params.min,o=a.params.max;i&&o?r(a,t,[i,o]):i?r(a,e,i):o&&r(a,n,o)}))},e.addSingleVal=function(a,e,n){return this.add(a,[e||"val"],(function(t){r(t,n||a,t.params[e])}))},n.addMethod("__dummy__",(function(a,e,n){return!0})),n.addMethod("regex",(function(a,e,n){var t;return!!this.optional(e)||(t=new RegExp(n).exec(a))&&0===t.index&&t[0].length===a.length})),n.addMethod("nonalphamin",(function(a,e,n){var t;return n&&(t=(t=a.match(/\W/g))&&t.length>=n),t})),n.methods.extension?(e.addSingleVal("accept","mimtype"),e.addSingleVal("extension","extension")):e.addSingleVal("extension","extension","accept"),e.addSingleVal("regex","pattern"),e.addBool("creditcard").addBool("date").addBool("digits").addBool("email").addBool("number").addBool("url"),e.addMinMax("length","minlength","maxlength","rangelength").addMinMax("range","min","max","range"),e.addMinMax("minlength","minlength").addMinMax("maxlength","minlength","maxlength"),e.add("equalto",["other"],(function(e){var n=o(e.element.name),t=d(e.params.other,n);r(e,"equalTo",a(e.form).find(":input").filter("[name='"+i(t)+"']")[0])})),e.add("required",(function(a){"INPUT"===a.element.tagName.toUpperCase()&&"CHECKBOX"===a.element.type.toUpperCase()||r(a,"required",!0)})),e.add("remote",["url","type","additionalfields"],(function(e){var n={url:e.params.url,type:e.params.type||"GET",data:{}},t=o(e.element.name);a.each(function(a){return a.replace(/^\s+|\s+$/g,"").split(/\s*,\s*/g)}(e.params.additionalfields||e.element.name),(function(r,o){var s=d(o,t);n.data[s]=function(){var n=a(e.form).find(":input").filter("[name='"+i(s)+"']");return n.is(":checkbox")?n.filter(":checked").val()||n.filter(":hidden").val()||"":n.is(":radio")?n.filter(":checked").val()||"":n.val()}})),r(e,"remote",n)})),e.add("password",["min","nonalphamin","regex"],(function(a){a.params.min&&r(a,"minlength",a.params.min),a.params.nonalphamin&&r(a,"nonalphamin",a.params.nonalphamin),a.params.regex&&r(a,"regex",a.params.regex)})),e.add("fileextensions",["extensions"],(function(a){r(a,"extension",a.params.extensions)})),a((function(){n.unobtrusive.parse(document)})),n.unobtrusive}));
