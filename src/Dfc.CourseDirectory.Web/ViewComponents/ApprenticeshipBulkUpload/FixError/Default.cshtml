@using Dfc.CourseDirectory.Models.Models.Apprenticeships
@using Microsoft.AspNetCore.Authorization;

@model Dfc.CourseDirectory.Web.ViewModels.PublishApprenticeships.PublishApprenticeshipsViewModel

@inject IAuthorizationService Authorization
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers


@{
    var adminLogin = await Authorization.AuthorizeAsync(User, "Admin");
}

@foreach (var apprenticeship in Model.ListOfApprenticeships)
{
    var type = "Framework";
    if(apprenticeship.StandardCode.HasValue)
    {
        type = "Standard";
    }


    <div class="error-line" id="ApprenticeshipId_@apprenticeship.id">
        <div class="govuk-grid-column-two-thirds m100 col">
            <div class="govuk-form-group--error">
                <strong>@apprenticeship.ApprenticeshipTitle</strong>
                <br />LEVEL: @apprenticeship.NotionalNVQLevelv2
                <span class="govuk-!-margin-left-3 govuk-tag">
                    @type
                </span>
                @{
                    if (apprenticeship.BulkUploadErrors.Any())
                    {
                        <div class="govuk-error-summary__body">
                            <ul class="govuk-list govuk-error-summary__list">

                                @if (apprenticeship.BulkUploadErrors.Any())
                                {
                                    <li class="govuk-error-message">Your apprenticeship contains one or more errors.</li>
                                }

                            </ul>
                        </div>

                    }
                }

            </div>

        </div>
            <div style="display:none">@apprenticeship.id</div>
            <div class="govuk-grid-column-one-third">
                <div class="align-right col right center">
                    <a id="course-fix-@apprenticeship.id" class="error-link" asp-controller="Apprenticeships" asp-action="ViewAndEdit" style="display:block"
                       asp-route-Id="@apprenticeship.id"
                       asp-route-Cancelled=null
                       asp-route-Mode="@ApprenticeshipMode.EditYourApprenticeships">Fix</a>
                </div>
            </div>
        </div>

}
