@using Dfc.CourseDirectory.Common.Settings
@using Microsoft.Extensions.Options
@model Dfc.CourseDirectory.Web.ViewComponents.Courses.WhatYouNeed.WhatYouNeedModel

@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@inject IOptions<WhatYouNeedComponentSettings> whatYouNeedComponentSettings

@{
    var regex = @"^[a-zA-Z0-9 /\n/\r/\¬\!\£\$\%\^\&\*\(\)_\+\-\=\{\}\[\]\;\:\@\'\#\~\,\<\>\.\?\/\|\`" + "\"" + "\\\\]+$";
    var whatYouNeedTextFieldMaxChars = whatYouNeedComponentSettings.Value.TextFieldMaxChars;
}



<div class="govuk-character-count" data-module="character-count" data-maxlength=@whatYouNeedTextFieldMaxChars>
    <div class="govuk-form-group">
        <label class="govuk-label" for="word-count">
            @Model.LabelText
        </label>
        @if (!string.IsNullOrWhiteSpace(Model.HintText))
        {
            <span class="govuk-hint">
                @Model.HintText
            </span>
        }
        <textarea class="govuk-textarea js-character-count " asp-for="@Model.WhatYouNeed" rows="5"
                   aria-describedby="@Model.AriaDescribedBy"
                          val-max-length=@whatYouNeedTextFieldMaxChars val-max-length-message="What you’ll need to bring must be @whatYouNeedTextFieldMaxChars characters or less"
                          val-regex="@regex"
                          val-regex-message="What you’ll need to bring contains invalid characters"></textarea>

    </div>
</div>
