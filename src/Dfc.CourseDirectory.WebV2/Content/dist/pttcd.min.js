$(".pttcd-cookie-banner__hide").click(function(){$(".pttcd-cookie-banner-container").remove()});$(function(){$('*[data-pttcd-module="sortable-table"]').each(function(n,t){new MOJFrontend.SortableTable({table:t})})});var MOJFrontend=MOJFrontend||{};MOJFrontend.SortableTable=function(n){this.table=$(n.table);this.setupOptions(n);this.body=this.table.find("tbody");this.createHeadingButtons();this.createStatusBox();this.table.on("click","th button",$.proxy(this,"onSortButtonClick"))};MOJFrontend.SortableTable.prototype.setupOptions=function(n){n=n||{};this.statusMessage=n.statusMessage||"Sort by %heading% (%direction%)";this.ascendingText=n.ascendingText||"ascending";this.descendingText=n.descendingText||"descending"};MOJFrontend.SortableTable.prototype.createHeadingButtons=function(){for(var i=this.table.find("thead th"),t,n=0;n<i.length;n++)t=$(i[n]),t.attr("aria-sort")&&this.createHeadingButton(t,n)};MOJFrontend.SortableTable.prototype.createHeadingButton=function(n,t){var i=n.text(),r=$('<button type="button" data-index="'+t+'">'+i+"<\/button>");n.text("");n.append(r)};MOJFrontend.SortableTable.prototype.createStatusBox=function(){this.status=$('<div aria-live="polite" role="status" aria-atomic="true" class="govuk-visually-hidden" />');this.table.parent().append(this.status)};MOJFrontend.SortableTable.prototype.onSortButtonClick=function(n){var f=n.currentTarget.getAttribute("data-index"),i=$(n.currentTarget).parent().attr("aria-sort"),t,r,u;t=i==="none"||i==="descending"?"ascending":"descending";r=this.getTableRowsArray();u=this.sort(r,f,t);this.addRows(u);this.removeButtonStates();this.updateButtonState($(n.currentTarget),t)};MOJFrontend.SortableTable.prototype.updateButtonState=function(n,t){n.parent().attr("aria-sort",t);var i=this.statusMessage;i=i.replace(/%heading%/,n.text());i=i.replace(/%direction%/,this[t+"Text"]);this.status.text(i)};MOJFrontend.SortableTable.prototype.removeButtonStates=function(){this.table.find("thead th").attr("aria-sort","none")};MOJFrontend.SortableTable.prototype.addRows=function(n){for(var t=0;t<n.length;t++)this.body.append(n[t])};MOJFrontend.SortableTable.prototype.getTableRowsArray=function(){for(var t=[],i=this.body.find("tr"),n=0;n<i.length;n++)t.push(i[n]);return t};MOJFrontend.SortableTable.prototype.sort=function(n,t,i){return n.sort($.proxy(function(n,r){var e=$(n).find("td").eq(t),o=$(r).find("td").eq(t),u=this.getCellValue(e),f=this.getCellValue(o);return i==="ascending"?u<f?-1:u>f?1:0:f<u?-1:f>u?1:0},this))};MOJFrontend.SortableTable.prototype.getCellValue=function(n){var t=n.attr("data-sort-value");return t=t||n.html(),$.isNumeric(t)&&(t=parseInt(t,10)),t};$(function(){$('*[data-pttcd-module="sub-region-selector"]').each(function(n,t){$(t).find(".pttcd-sub-regions-selector__region").each(function(n,t){const r=$(t).find('input[type="checkbox"]'),o=r.length,f=$("<div />").addClass("govuk-checkboxes__item").addClass("govuk-!-margin-bottom-3").css("width","100%"),i=$("<input />").attr("type","checkbox").attr("id",$(t).closest(".govuk-accordion").attr("id")+"-region-"+n+"-select-all").addClass("govuk-checkboxes__input").change(function(n){r.prop("checked",$(n.target).is(":checked"));e()}),s=$("<label />").attr("for",i.attr("id")).addClass("govuk-checkboxes__label").addClass("govuk-label").html("Select all"),u=$("<div />").addClass("govuk-accordion__section-summary").addClass("govuk-body").hide();f.append(i);f.append(s);$(t).find(".govuk-checkboxes").prepend(f);$(t).find(".govuk-accordion__section-header").append(u);const e=function(){const n=r.filter(":checked").length;n===o?(i.prop("checked",!0),u.text("All areas selected").show()):n>0?(i.prop("checked",!1),u.text(n+" area"+(n>1?"s":"")+" selected").show()):(i.prop("checked",!1),u.text("").hide())};r.change(e);e()})})}),function(n){n(".pttcd-tlevel__venues-selector").each(function(t,i){const r=n(i).find(".govuk-checkboxes__item"),u=r.find('input[type = "checkbox"]'),o=r.length;if(!(o<10)){const s=r[0].id+"-selectall",f=n("<input />").attr("type","checkbox").attr("id",s).addClass("govuk-checkboxes__input").change(function(t){u.prop("checked",n(t.target).is(":checked"));e()}),h=n("<div />").addClass("govuk-checkboxes__item").append(f).append(n("<label />").attr("for",s).addClass("govuk-label").addClass("govuk-checkboxes__label").css("font-weight","bold").text("Select all"));h.insertBefore(r[0]);const e=function(){const n=u.filter(":checked").length;n===o?f.prop("checked",!0):n>0&&f.prop("checked",!1)};u.change(e);e()}})}(window.jQuery);$('*[data-pttcd-module="rich-text-editor"]').each(function(n,t){var i=$(t).find(".govuk-textarea, .govuk-js-character-count")[0];tinymce.init({target:i,plugins:"advlist lists paste",menubar:!1,statusbar:!1,toolbar:"formatselect | bold | numlist bullist | removeformat",paste_as_text:!0,content_css:"/v2/pttcd.css",setup:function(n){var o=function(){var n=document.createEvent("HTMLEvents");n.initEvent("keyup",!1,!0);i.dispatchEvent(n)},s=i.getAttribute("name"),r,u,f,e;i.removeAttribute("name");r=$("<div />").html(i.innerHTML).text();u=$("<input>").attr("type","hidden").attr("name",s).val(r);$(i).before(u);f=function(n){u.val(n);var t=$("<div />").html(n).text();i.innerHTML=t;o()};e=function(){var t=n.getContent();f(t)};n.on("keyup",e);n.on("change",e);n.on("focus",function(){$(t).find(".tox-tinymce").addClass("tox-tinymce--focused")});n.on("blur",function(){$(t).find(".tox-tinymce").removeClass("tox-tinymce--focused")});i.removeAttribute("id");f(r);o()}})});$(function(){const n=$(":focus").closest(".govuk-form-group")[0];n&&n.scrollIntoView()});$(".pttcd-needs-js").each(function(n,t){$(t).removeAttr("aria-hidden").removeClass("pttcd-needs-js")});